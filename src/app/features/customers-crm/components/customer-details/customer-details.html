<p-dialog
  [header]="'Customer Info'"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '900px', maxWidth: '95vw' }"
  [draggable]="false"
  [resizable]="false"
  (onHide)="onDialogHide()"
  styleClass="customer-details-dialog"
>
  <div class="customer-details-content">
    <!-- Loading State -->
    @if (loading()) {
    <div class="loading-container d-flex justify-content-center align-items-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
    }

    <!-- Error State -->
    @if (error() && !loading()) {
    <div class="error-container d-flex flex-column justify-content-center align-items-center gap-3">
      <i class="pi pi-exclamation-circle text-danger fs-1"></i>
      <p class="text-danger mb-0">{{ error() }}</p>
      <button class="btn btn-outline-primary" (click)="closeDialog()">
        <i class="pi pi-times me-2"></i>Close
      </button>
    </div>
    }

    <!-- Customer Details -->
    @if (customer() && !loading() && !error()) {
    <!-- Profile Section -->
    <div class="profile-section d-flex justify-content-between align-items-center">
      <div class="profile-info d-flex align-items-center gap-3">
        <div class="profile-avatar">
          <i class="pi pi-user"></i>
        </div>
        <div class="profile-details">
          <h3 class="profile-name mb-1">{{ getFullName() }}</h3>
          <span class="profile-location">{{ customer()?.state }}</span>
        </div>
      </div>
      <div class="client-badge">
        <div class="badge-icon">
          <i class="pi pi-users"></i>
        </div>
        <span class="badge-label">Client</span>
      </div>
    </div>

    <!-- Personal Details Section -->
    <div class="details-section">
      <h4 class="section-title">Personal Details</h4>

      <!-- Full Legal Name -->
      <div class="form-row">
        <div class="form-group full-width">
          <label class="form-label"> Full Legal Name <span class="required">*</span> </label>
          <div class="form-value">{{ getFullName() }}</div>
        </div>
      </div>

      <!-- Email & Gender -->
      <div class="form-row two-columns">
        <div class="form-group">
          <label class="form-label"> Email <span class="required">*</span> </label>
          <div class="form-value">{{ customer()?.eMail }}</div>
        </div>
        <div class="form-group">
          <label class="form-label"> Gender <span class="required">*</span> </label>
          <div class="form-value">{{ customer()?.gender }}</div>
        </div>
      </div>

      <!-- Phone Number & National ID -->
      <div class="form-row two-columns">
        <div class="form-group">
          <label class="form-label"> Phone Number <span class="required">*</span> </label>
          <div class="form-value phone-value">
            <span class="flag-icon">ðŸ‡ºðŸ‡¸</span>
            {{ customer()?.phone }}
          </div>
        </div>
        <div class="form-group">
          <label class="form-label"> National ID <span class="required">*</span> </label>
          <div class="form-value">{{ customer()?.ssn }}</div>
        </div>
      </div>
    </div>

    <hr class="section-divider" />

    <!-- Address Section -->
    <div class="details-section">
      <h4 class="section-title">Address</h4>

      <!-- Country & City/State -->
      <div class="form-row two-columns">
        <div class="form-group">
          <label class="form-label"> Country <span class="required">*</span> </label>
          <div class="form-value">{{ customer()?.country }}</div>
        </div>
        <div class="form-group">
          <label class="form-label"> City/State <span class="required">*</span> </label>
          <div class="form-value">{{ customer()?.state }}</div>
        </div>
      </div>

      <!-- Postal Code -->
      <div class="form-row">
        <div class="form-group half-width">
          <label class="form-label"> Postal Code <span class="required">*</span> </label>
          <div class="form-value">{{ customer()?.postalCode }}</div>
        </div>
      </div>
    </div>
    }
  </div>
</p-dialog>
