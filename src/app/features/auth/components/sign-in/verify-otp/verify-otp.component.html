<div class="verify-otp-page vh-100 container-fluid" [attr.dir]="dir()">
  <div class="row h-100">
    <!-- Left: Verify OTP form -->
    <div class="verify-otp-container col-12 col-lg-6 d-flex flex-column align-items-center justify-content-center p-4 bg-white overflow-auto order-1">
      <div class="w-100 mx-auto" style="max-width: 576px;">

        <!-- Logo -->
        <div class="d-flex justify-content-center mb-3">
          <img src="assets/images/logo.png" alt="Logo" style="height: 4rem;" />
        </div>

        <!-- Title -->
        <header class="text-center mb-4">
          <h1 class="text-dark fs-2 fw-semibold">
            {{ 'AUTH.PASSWORD_RESET' | translate }}
          </h1>
          <p class="text-dark small text-center fw-medium mt-2" style="letter-spacing: -0.05em;">
            {{ 'AUTH.WE_SENT_CODE' | translate }}
            <strong style="color: rgba(0,93,181,1);">{{ email() }}</strong>
          </p>
        </header>

        <!-- Form -->
        <div class="mb-4">
          <form [formGroup]="verifyPassForm" (ngSubmit)="onSubmit()">

            <!-- OTP Input Fields -->
            <div class="d-flex justify-content-center gap-3 mb-4" dir="ltr">
              @for(i of [0, 1, 2, 3, 4, 5]; track i) {
              <input type="text" maxlength="1"
                class="otp-input border rounded text-center bg-white text-dark"
                style="width: 3rem; height: 3rem; border-width: 2px; border-color: #dee2e6;"
                autofocus (input)="onOtpInput($event, i)" (paste)="onPasteOtp($event)" (keydown)="onOtpKeyDown($event, i)"
                [value]="verifyPassForm.get('code')?.value?.charAt(i) || ''" />
              }
            </div>

            <!-- Resend code link -->
            <p class="text-secondary text-center mb-4">
              {{ 'AUTH.DIDNT_RECEIVE_CODE' | translate }}
              @if (resendCooldown() > 0) {
              <span class="text-primary">
                {{ 'CONFIRM_EMAIL.BUTTONS.RESENDING' | translate }} {{ resendCooldown() }}s
              </span>
              } @else {
              <a (click)="resendCode()" class="text-primary text-decoration-none cursor-pointer">
                {{ 'CONFIRM_EMAIL.BUTTONS.RESEND' | translate }}
              </a>
              }
            </p>

            <!-- Continue button -->
            <div class="d-flex align-items-center justify-content-center">
              <app-button type="submit" [label]="'AUTH.CONTINUE' | translate"
                [disabled]="verifyPassForm.invalid || isLoading()" [loading]="isLoading()"
                [loadingText]="'AUTH.VERIFYING' | translate" [fullWidth]="false">
              </app-button>
            </div>

            <!-- Back to Login Link -->
            <div class="text-center mt-2">
              <a [routerLink]="ROUTES.signIn"
                class="back-url d-inline-flex align-items-center justify-content-center text-decoration-none fw-medium"
                style="color: rgba(0,93,181,1);">
                <svg [class.rotate-180]="dir() === 'rtl'" class="me-1" style="width: 1rem; height: 1rem; transition: transform 0.3s;"
                  fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18">
                  </path>
                </svg>
                {{ 'AUTH.BACK_TO_LOGIN' | translate }}
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Right: Branding image (same as forget-password) -->
    <div class="d-none d-lg-flex col-lg-6 position-relative order-2">
      <div class="position-fixed top-0 h-100" [class.end-0]="dir() === 'ltr'" [class.start-0]="dir() === 'rtl'"
        style="width: 50%; z-index: 20;">
        <div class="position-absolute top-0 start-0 end-0 bottom-0"
          style="background-image: url('/assets/images/verify-otp.png'); background-position: center; background-size: cover; background-repeat: no-repeat;"></div>
        <div class="position-absolute top-0 start-0 end-0 bottom-0" style="background-color: rgba(0,93,181,0.7);"></div>
        <div class="position-absolute top-0 start-0 end-0 bottom-0 d-flex flex-column justify-content-center px-5 font-libre-franklin"
          [class.align-items-start]="dir() === 'ltr'" [class.align-items-end]="dir() === 'rtl'" [class.text-start]="dir() === 'ltr'"
          [class.text-end]="dir() === 'rtl'">
          <h2 class="text-white fw-semibold lh-sm" style="font-size: 4rem; max-width: 32rem;">
            Lorem ipsum dolor sit amet.
          </h2>
          <p class="text-white mt-4 fs-5" style="max-width: 32rem; opacity: 0.9;">
            Lorem ipsum dolor sit amet consectetur. Eget commodo imperdiet.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>