<div class="container-fluid p-0 m-0" [dir]="isRTL() ? 'rtl' : 'ltr'">
  <div class="crm-layout d-flex">
    <!-- Backdrop (mobile/tablet only) -->
    @if(isMobileView()) {
    <div class="sidebar-backdrop" [class.show]="showMobileBackdrop()" (click)="closeMobileSidebar()">
    </div>
    }

    <!-- Sidebar -->
    <div class="sidebar-wrapper" [class.desktop-collapsed]="!isMobileView() && isSidebarCollapsed()"
      [class.mobile-open]="isMobileView() && isSidebarOpen()">
      <app-sidebar [isMobile]="isMobileView()" [isSidebarCollapsed]="!isMobileView() && isSidebarCollapsed()"
        (sidebarToggled)="onSidebarToggled()" (sidebarCollapsedToggled)="toggleSidebarCollapsed()">
      </app-sidebar>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <app-header [isMobile]="isMobileView()" (mobileMenuToggled)="toggleMobileSidebar()">
      </app-header>

      <div class="content-area">
        <router-outlet></router-outlet>
      </div>
    </div>
  </div>
</div>